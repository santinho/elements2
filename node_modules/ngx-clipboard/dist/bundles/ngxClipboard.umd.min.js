(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?factory(exports,require("@angular/core"),require("@angular/common")):typeof define==="function"&&define.amd?define(["exports","@angular/core","@angular/common"],factory):factory((global.ngx=global.ngx||{},global.ngx.clipboard=global.ngx.clipboard||{}),global.ng.core,global.ng.common)})(this,function(exports,_angular_core,_angular_common){"use strict";var __decorate$3=undefined&&undefined.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};function _window(){return window}var WindowSrv=function(){function WindowSrv(){}Object.defineProperty(WindowSrv.prototype,"nativeWindow",{get:function(){return _window()},enumerable:true,configurable:true});return WindowSrv}();WindowSrv=__decorate$3([_angular_core.Injectable()],WindowSrv);var DOCUMENT=new _angular_core.OpaqueToken("DOCUMENT");function _document(){return document}var __decorate$2=undefined&&undefined.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};var __metadata$1=undefined&&undefined.__metadata||function(k,v){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(k,v)};var __param=undefined&&undefined.__param||function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};var ClipboardService=function(){function ClipboardService(document,windowService){this.document=document;this.windowService=windowService;this.window=this.windowService.nativeWindow}Object.defineProperty(ClipboardService.prototype,"isSupported",{get:function(){return!!this.document.queryCommandSupported&&!!this.document.queryCommandSupported("copy")},enumerable:true,configurable:true});ClipboardService.prototype.isTargetValid=function(element){if(element instanceof HTMLInputElement||element instanceof HTMLTextAreaElement){if(element.hasAttribute("disabled")){throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute')}return true}throw new Error("Target should be input or textarea")};ClipboardService.prototype.copyFromInputElement=function(targetElm,renderer){try{this.selectTarget(targetElm,renderer);var re=this.copyText();this.clearSelection(targetElm,this.window);return re}catch(error){return false}};ClipboardService.prototype.copyFromContent=function(content,renderer){if(!this.tempTextArea){this.tempTextArea=this.createTempTextArea(this.document,this.window);this.document.body.appendChild(this.tempTextArea)}this.tempTextArea.value=content;return this.copyFromInputElement(this.tempTextArea,renderer)};ClipboardService.prototype.destroy=function(){if(this.tempTextArea){this.document.body.removeChild(this.tempTextArea);this.tempTextArea=undefined}};ClipboardService.prototype.selectTarget=function(inputElement,renderer){renderer.invokeElementMethod(inputElement,"select");renderer.invokeElementMethod(inputElement,"setSelectionRange",[0,inputElement.value.length]);return inputElement.value.length};ClipboardService.prototype.copyText=function(){return this.document.execCommand("copy")};ClipboardService.prototype.clearSelection=function(inputElement,window){inputElement&&inputElement.blur();window.getSelection().removeAllRanges()};ClipboardService.prototype.createTempTextArea=function(doc,window){var isRTL=doc.documentElement.getAttribute("dir")==="rtl";var ta;ta=doc.createElement("textarea");ta.style.fontSize="12pt";ta.style.border="0";ta.style.padding="0";ta.style.margin="0";ta.style.position="absolute";ta.style[isRTL?"right":"left"]="-9999px";var yPosition=window.pageYOffset||doc.documentElement.scrollTop;ta.style.top=yPosition+"px";ta.setAttribute("readonly","");return ta};return ClipboardService}();ClipboardService=__decorate$2([_angular_core.Injectable(),__param(0,_angular_core.Inject(DOCUMENT)),__metadata$1("design:paramtypes",[Document,WindowSrv])],ClipboardService);function CLIPBOARD_SERVICE_PROVIDER_FACTORY(doc,windowSrv,parentDispatcher){return parentDispatcher||new ClipboardService(doc,windowSrv)}var CLIPBOARD_SERVICE_PROVIDER={provide:ClipboardService,useFactory:CLIPBOARD_SERVICE_PROVIDER_FACTORY,deps:[DOCUMENT,WindowSrv,[new _angular_core.Optional,new _angular_core.SkipSelf,ClipboardService]]};var __decorate$1=undefined&&undefined.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};var __metadata=undefined&&undefined.__metadata||function(k,v){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(k,v)};exports.ClipboardDirective=function(){function ClipboardDirective(clipboardSrv,renderer){this.clipboardSrv=clipboardSrv;this.renderer=renderer;this.cbOnSuccess=new _angular_core.EventEmitter;this.cbOnError=new _angular_core.EventEmitter}ClipboardDirective.prototype.ngOnInit=function(){if(!this.clipboardSrv.isSupported){throw new Error("Your environment does not support copy.")}};ClipboardDirective.prototype.ngOnDestroy=function(){this.clipboardSrv.destroy()};ClipboardDirective.prototype.onClick=function(button){if(this.targetElm&&this.clipboardSrv.isTargetValid(this.targetElm)){this.handleResult(this.clipboardSrv.copyFromInputElement(this.targetElm,this.renderer),this.targetElm.value)}else if(this.cbContent){this.handleResult(this.clipboardSrv.copyFromContent(this.cbContent,this.renderer),this.cbContent)}};ClipboardDirective.prototype.handleResult=function(succeeded,copiedContent){if(succeeded){this.cbOnSuccess.emit({isSuccess:true,content:copiedContent})}else{this.cbOnError.emit({isSuccess:false})}};return ClipboardDirective}();__decorate$1([_angular_core.Input("ngxClipboard"),__metadata("design:type",HTMLInputElement)],exports.ClipboardDirective.prototype,"targetElm",void 0);__decorate$1([_angular_core.Input(),__metadata("design:type",String)],exports.ClipboardDirective.prototype,"cbContent",void 0);__decorate$1([_angular_core.Output(),__metadata("design:type",_angular_core.EventEmitter)],exports.ClipboardDirective.prototype,"cbOnSuccess",void 0);__decorate$1([_angular_core.Output(),__metadata("design:type",_angular_core.EventEmitter)],exports.ClipboardDirective.prototype,"cbOnError",void 0);__decorate$1([_angular_core.HostListener("click",["$event.target"]),__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],exports.ClipboardDirective.prototype,"onClick",null);exports.ClipboardDirective=__decorate$1([_angular_core.Directive({selector:"[ngxClipboard]"}),__metadata("design:paramtypes",[ClipboardService,_angular_core.Renderer])],exports.ClipboardDirective);var __decorate=undefined&&undefined.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};exports.ClipboardModule=function(){function ClipboardModule(){}return ClipboardModule}();exports.ClipboardModule=__decorate([_angular_core.NgModule({declarations:[exports.ClipboardDirective],exports:[exports.ClipboardDirective],imports:[_angular_common.CommonModule],providers:[{provide:DOCUMENT,useFactory:_document},WindowSrv,CLIPBOARD_SERVICE_PROVIDER]})],exports.ClipboardModule);Object.defineProperty(exports,"__esModule",{value:true})});